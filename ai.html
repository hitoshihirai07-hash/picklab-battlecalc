<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Pick Lab - AI提案</title>
  <link rel="manifest" href="assets/manifest.webmanifest">
  <link rel="icon" href="assets/icon.svg" type="image/svg+xml">
  <link rel="stylesheet" href="style.css"/>
</head>
<body>
<header>
  <h1><a href="./" style="color:inherit;text-decoration:none">Pick Lab</a></h1>
  <div class="sub">対戦・選出シミュレーター</div>
  <div class="toolbar">
    <a class="btn" href="./">← メインへ戻る</a>
    <button id="btnAiRecalc" type="button" class="primary">提案を更新</button>
  </div>
  <div id="aiStatus" class="note" style="margin-top:8px"></div>
</header>

<main>
  <div class="grid">
    <section class="card">
      <div class="panelTitle">
        <h2>引き継ぎ内容</h2>
        <div class="small">メインの入力をそのまま使います</div>
      </div>
      <div id="aiSummary" class="note"></div>
      <div class="row" style="justify-content:flex-start;gap:8px;margin-top:10px;flex-wrap:wrap">
        <button id="btnReloadAiState" class="btn">引き継ぎを再読込</button>
        <button id="btnCopyAiState" class="btn">チーム内容をコピー</button>
        <a class="btn" href="./" target="_blank" rel="noopener">メインを別タブで開く</a>
      </div>
      <details id="aiDetails" style="margin-top:10px">
        <summary class="btn">チーム詳細（技・持ち物など）</summary>
        <div id="aiTeamDetails" class="note" style="margin-top:10px"></div>
      </details>


      <div class="hr"></div>
      <div class="panelTitle">
        <h2>盤面入力</h2>
        <div class="small">毎ターンここだけ触って更新</div>
      </div>

      <div class="row">
        <div class="field">
          <label>あなたの場</label>
          <select id="selLeftActive"></select>
        </div>
        <div class="field">
          <label>相手の場</label>
          <select id="selRightActive"></select>
        </div>
      </div>

      <div class="row">
        <div class="field">
          <label>あなたの場 HP（%）</label>
          <input id="hpLeft" type="number" min="0" max="100" step="1" value="100"/>
        </div>
        <div class="field">
          <label>相手の場 HP（%）</label>
          <input id="hpRight" type="number" min="0" max="100" step="1" value="100"/>
        </div>
      </div>

      <div class="hr"></div>
      <div>
        <div class="small">あなた側（選出3体）の残りHP（ざっくり）</div>
        <div id="allyState"></div>
      </div>

      <div class="hr"></div>
      <div class="row">
        <label class="btn" style="display:inline-flex;align-items:center;gap:8px;">
          りゅうまい/つるまいを警戒
          <input id="tgSetup" type="checkbox" checked />
        </label>
        <label class="btn" style="display:inline-flex;align-items:center;gap:8px;">
          受け先チェック（相手のタイプのみ）
          <input id="tgNoSwitch" type="checkbox" checked />
        </label>
      </div>

      <div class="note" style="margin-top:10px">
        ※このページは「負け筋（積み許し／受け先無し）」を先に潰す方向で、ざっくり提案します。<br/>
        ※本気の対戦エンジンではありません（命中・急所・持ち物・回復・状態異常などは未考慮）。
      </div>
    </section>

    <section class="card">
      <div class="panelTitle">
        <h2>提案（1〜3位）</h2>
        <div class="small">安全寄り（負け筋を優先して回避）</div>
      </div>

      <div id="aiSuggest" class="note"></div>

      <div class="hr"></div>
      <div class="panelTitle">
        <h2>除外した候補</h2>
        <div class="small">負け筋が濃すぎる手</div>
      </div>
      <div id="aiRejected" class="note"></div>
    </section>
  </div>
</main>

<script src="ai.js"></script>
</body>
</html>
