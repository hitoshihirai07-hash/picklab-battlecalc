<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Pick Lab 対戦・ダメージ計算</title>
  <link rel="manifest" href="../assets/manifest.webmanifest">
  <link rel="icon" href="../assets/icon.svg" type="image/svg+xml">
  <link rel="stylesheet" href="../style.css?v=20260216_log2"/>
  <style>
    .grid2{display:grid;gap:14px;grid-template-columns:1fr}
    @media (min-width:980px){ .grid2{grid-template-columns:1fr 1fr} }
    .slotGrid{display:grid;grid-template-columns:1fr;gap:8px}
    .slotRow{display:grid;grid-template-columns:56px 1fr;gap:8px;align-items:center}
    .slotRow .lbl{font-size:12px;color:var(--muted);text-align:right}
    .pickRow{display:grid;grid-template-columns:56px 1fr;gap:8px;align-items:center;margin-top:8px}
    .actions{display:flex;gap:10px;flex-wrap:wrap;align-items:center;margin-top:10px}
    .statline{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    .ok{border:1px solid rgba(46, 204, 113, .35);background:rgba(46, 204, 113, .10);padding:8px 10px;border-radius:12px}
    .ng{border:1px solid rgba(255, 99, 71, .35);background:rgba(255, 99, 71, .10);padding:8px 10px;border-radius:12px}
  
    .logItem{display:flex;gap:10px;align-items:flex-start;justify-content:space-between;padding:8px 10px;border:1px solid rgba(255,255,255,.08);border-radius:12px;margin:8px 0}
    .logLeft{min-width:0;flex:1}
    .logMeta{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    .pill{display:inline-block;padding:2px 8px;border-radius:999px;border:1px solid rgba(255,255,255,.12);font-size:12px}
    .mono{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace}
    .danger{border-color: rgba(255, 99, 71, .35);background:rgba(255, 99, 71, .10)}

  </style>
</head>
<body>
<header>
  <h1>Pick Lab 対戦・ダメージ計算</h1>
  <div class="sub">学習ログ（この端末に保存）</div>
  <div class="toolbar">
    <a class="btn" href="../" style="text-decoration:none;">トップ</a>
    <a class="btn" href="../sim/" style="text-decoration:none;">シミュ</a>
    <a class="btn" href="../calc/" target="_blank" rel="noopener" style="text-decoration:none;">ダメージ計算</a>
  </div>
  <div class="note" style="margin-top:8px">
    このページは<b>この端末</b>に対戦ログを保存します。外部送信はしません。<br>
    相手6体/自分6体と、両者の選出1〜3を記録できます（後で「よくある並び学習」に使う入口）。
  </div>
</header>

<main>
  <section class="card">
    <div class="panelTitle">
      <h2>ログ入力</h2>
      <div class="small">対戦後にここを埋めて「ログ収集（保存）」→ 次の試合は「クリア」</div>
    </div>

    
    <div class="panelTitle" style="margin-top:14px">
      <h3 class="h3">レギュレーション</h3>
      <div class="small">例：レギュG / レギュH（自由入力OK） ※保存時に一緒に記録します</div>
    </div>
    <div class="statline" style="margin:6px 0 12px">
      <input id="regInput" type="text" list="regList" placeholder="例：レギュG" autocomplete="off" spellcheck="false" style="min-width:220px;flex:1"/>
      <datalist id="regList"></datalist>
      <span class="muted">|</span>
      <span class="small">表示フィルタ</span>
      <select id="regFilter"></select>
    </div>


    <div class="panelTitle" style="margin-top:14px">
      <h3 class="h3">候補の絞り込み（使用可能ポケモン）</h3>
    </div>
    <div class="statline" style="margin:6px 0 14px; gap:10px; flex-wrap:wrap">
      <label class="small" style="display:flex;align-items:center;gap:8px">
        <input id="toggleReg" type="checkbox"/>
        使用可能ポケモンのみ
      </label>
      <button id="btnLoadRegDefault" class="btn" type="button">対象リスト更新</button>
      <span id="regInfo" class="small muted"></span>
    </div>

<div class="grid2">
      <section>
        <div class="panelTitle" style="margin-top:0">
          <h3 class="h3">自分（6体）</h3>
          <div class="small">日本語名でOK（候補が出ます）</div>
        </div>
        <div id="selfSlots" class="slotGrid"></div>

        <div class="panelTitle" style="margin-top:14px">
          <h3 class="h3">自分の選出（1〜3）</h3>
          <div class="small">6体から選ぶ（空でも保存可）</div>
        </div>
        <div id="selfPicks" class="slotGrid"></div>
      </section>

      <section>
        <div class="panelTitle" style="margin-top:0">
          <h3 class="h3">相手（6体）</h3>
          <div class="small">分かる範囲だけでもOK</div>
        </div>
        <div id="oppSlots" class="slotGrid"></div>

        <div class="panelTitle" style="margin-top:14px">
          <h3 class="h3">相手の選出（1〜3）</h3>
          <div class="small">分かったら入れる（空でも保存可）</div>
        </div>
        <div id="oppPicks" class="slotGrid"></div>
      </section>
    </div>

    <datalist id="pokemonList"></datalist>

    <div class="hr"></div>

    <div class="actions">
      <button id="btnSave" class="primary">ログ収集（保存）</button>
      <button id="btnClear" class="btn" type="button">クリア（次の試合）</button>
      <div class="statline small">
        表示件数: <b id="logCount">0</b> <span class="muted">/</span> 全件: <b id="logCountAll">0</b>
        <span class="muted">/</span>
        最終保存: <span id="lastSaved">-</span>
      </div>
    </div>

    <div id="msg" class="note" style="margin-top:10px"></div>

    <div class="hr"></div>

    <div class="panelTitle" style="margin-top:0">
      <h2>保存ログ（最新20件）</h2>
      <div class="small">レギュレーションで絞り込みできます。各行の「削除」で個別削除。</div>
    </div>

    <div id="logList" class="note" style="margin-top:10px; overflow:auto;"></div>
  </section>
</main>

<script src="./log.js?v=20260216_learnui1"></script>
</body>
</html>
