<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Pick Lab 対戦・ダメージ計算</title>
  <link rel="manifest" href="assets/manifest.webmanifest">
  <link rel="icon" href="assets/icon.svg" type="image/svg+xml">
  <link rel="stylesheet" href="style.css"/>
  <style>
    .hero{display:grid;gap:14px}
    .heroBtns{display:flex;gap:10px;flex-wrap:wrap;margin-top:6px}
    a.btnLink{display:inline-flex;align-items:center;justify-content:center;gap:8px;text-decoration:none}
    a.btnLink.primary{border-color:transparent;background:var(--accent);color:var(--text)}
    a.btnLink.secondary{background:#fff}
    .steps{margin:0;padding-left:18px;line-height:1.8}
  </style>
</head>
<body>
<header>
  <h1>Pick Lab 対戦・ダメージ計算</h1>
  <div class="sub">選出シミュレーターとダメージ計算を、同じチーム状態で行き来できます。</div>
  <div class="toolbar">
    <a class="btn btnLink secondary" href="sim/">シミュレーターへ</a>
    <a class="btn btnLink primary" href="calc/">ダメージ計算へ</a>
  </div>
</header>

<main>
  <div class="hero">
    <section class="card">
      <div class="panelTitle">
        <h2>このサイトについて</h2>
        <div class="small">Pick Lab × BattleCalc 統合版</div>
      </div>
      <div class="note">
        対戦の「選出」→ 気になる対面の「ダメージ計算」までを、同じチーム情報のままスムーズに回すためのツールです。<br/>
        ブラウザ内（ローカル）に保存され、外部に送信しません。
      </div>
      <div class="hr"></div>
      <ul class="steps">
        <li><b>シミュレーター</b>：6匹を作って、3匹選出のざっくり比較ができます。</li>
        <li><b>ダメージ計算</b>：1対1／6対6で、技・努力値込みのダメージ計算ができます。</li>
        <li><b>連携</b>：シミュ側の「チーム→ダメ計」で、作ったチームをそのまま計算へ反映できます。</li>
      </ul>
    </section>

    <section class="card">
      <div class="panelTitle">
        <h2>メモ（任意）</h2>
        <div class="small">保存しても公開されません</div>
      </div>
      <div class="row">
        <div class="field">
          <label>チーム名</label>
          <input id="introTeamName" type="text" placeholder="例：S1 受け寄り／雨軸 など"/>
        </div>
        <div class="field" style="min-width:260px;flex:2">
          <label>メモ</label>
          <textarea id="introMemo" placeholder="例：初手は○○想定、△△は後投げ… など"></textarea>
        </div>
      </div>
      <div class="row" style="margin-top:6px">
        <button id="introSave" class="primary" type="button">保存</button>
        <button id="introClear" type="button">消去</button>
        <span id="introStatus" class="small" style="align-self:center"></span>
      </div>
    </section>

    <section class="card">
      <div class="panelTitle">
        <h2>はじめかた</h2>
        <div class="small">迷ったらこの順番</div>
      </div>
      <ol class="steps">
        <li>「シミュレーターへ」→ 図鑑データ読み込み → 6匹を作る</li>
        <li>「チーム→ダメ計」→ ダメ計側に自動反映</li>
        <li>必要なら JSON保存して、構築を使い回す</li>
      </ol>
    </section>
  </div>

  <div class="hr"></div>
  <div class="note">
    ※表示・計算結果は参考用です（環境・仕様差分で変わる場合があります）。
  </div>
</main>

<script>
  (function(){
    const K_NAME = 'plbc_intro_name';
    const K_MEMO = 'plbc_intro_memo';
    const $ = (id)=>document.getElementById(id);
    const name = $('introTeamName');
    const memo = $('introMemo');
    const st = $('introStatus');

    try{
      name.value = localStorage.getItem(K_NAME) || '';
      memo.value = localStorage.getItem(K_MEMO) || '';
    }catch{}

    $('introSave').addEventListener('click', ()=>{
      try{
        localStorage.setItem(K_NAME, name.value || '');
        localStorage.setItem(K_MEMO, memo.value || '');
        st.textContent = '保存しました';
      }catch(e){
        st.textContent = '保存に失敗しました';
      }
      setTimeout(()=>{ st.textContent=''; }, 1400);
    });

    $('introClear').addEventListener('click', ()=>{
      name.value=''; memo.value='';
      try{
        localStorage.removeItem(K_NAME);
        localStorage.removeItem(K_MEMO);
      }catch{}
      st.textContent = '消去しました';
      setTimeout(()=>{ st.textContent=''; }, 1400);
    });
  })();
</script>
</body>
</html>
